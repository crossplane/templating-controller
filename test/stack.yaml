---
apiVersion: stacks.crossplane.io/v1alpha1
kind: StackDefinition
metadata:
  name: template-stack-test
spec:
  behavior:
    source:
      image: crossplane/stack-minimal-gcp:latest
      path: "resources" # for running inside the IDE.
    crd:
      kind: SampleClaim
      apiVersion: samples.stacks.crossplane.io/v1alpha1
    engine:
      type: kustomize
      kustomize:
        overlays:
        - apiVersion: gcp.crossplane.io/v1alpha3
          kind: Provider
          name: gcp-provider
          bindings:
            - from: "spec.credentialsSecretRef"
              to: "spec.credentialsSecretRef"
            - from: "spec.projectID"
              to: "spec.projectID"
        - apiVersion: v1
          kind: ConfigMap
          name: gcp-config
          bindings:
            - from: "spec.region"
              to: "data.region"
